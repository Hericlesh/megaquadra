<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TENTA A SORTE BRASIL</title>
    <style>body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f0f0f0;
    }
    
    .container {
        max-width: 800px;
        margin: 0 auto;
        background-color: #ffffff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(72, 175, 12, 0.1);
    }
    
    h1 {
        color: #333;
        text-align: center;
    }
    
    .input-group {
        display: flex; /* Use flexbox para alinhar os campos de entrada */
        flex-direction: column; /* Alinha os itens verticalmente */
        align-items: center; /* Centraliza horizontalmente os itens dentro do container */
        margin-bottom: 25px; /* Espaçamento inferior dos campos */
    }
    
    .input-group label {
        font-weight: bold; /* Torna o texto em negrito */
        margin-bottom: 10px; /* Espaçamento entre o label e os campos de entrada */
        color: #555;
    }
    
    .search-number-grid {
        display: flex; /* Alinha os campos horizontalmente */
        gap: 5px; /* Reduz o espaçamento entre os campos */
        justify-content: center; /* Centraliza os campos horizontalmente */
    }
    
    input[type="text"] {
        width: 50px; /* Largura dos campos de entrada */
        height: 50px; /* Altura dos campos de entrada */
        font-size: 24px; /* Tamanho da fonte nos campos */
        text-align: center; /* Centraliza o texto dentro dos campos */
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 2px;
    }
    
    input[type="number"],
    select {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 2px;
        font-size: 16px;
    }
    
    
    
    
    button {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 25px;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 5px;
        transition: background-color 0.3s;
    }
    
    button:hover {
        background-color: #45a049;
    }
    
    #output {
        background-color: #ffffff;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin-top: 20px;
        color: #333;
    }
    
    .prize-table, .coupon-table, .number-table {
        width: 16%; /* Ajuste a largura da tabela conforme necessário */
        border-collapse: collapse;
        margin: 20px auto; /* Centraliza a tabela horizontalmente */
    }
    
    .prize-table th, .prize-table td, 
    .coupon-table th, .coupon-table td,
    .number-table th, .number-table td {
        border: 1px solid #ddd;
        padding: 5px; /* Ajuste o preenchimento das células conforme necessário */
        text-align: center;
        font-size: 20px; /* Ajuste o tamanho da fonte conforme necessário */
    }
    
    .prize-table th, .coupon-table th, .number-table th {
        background-color: #f4f4f4;
        color: #333;
    
    }
    
    .prize-table tr:nth-child(even), 
    .coupon-table tr:nth-child(even),
    .number-table tr:nth-child(even) {
        background-color: #f9f9f9;
    }
    
    .prize-table tbody tr:hover, 
    .coupon-table tbody tr:hover,
    .number-table tbody tr:hover {
        background-color: #f1f1f1;
    }
    
    .highlight {
        background-color: #ffeb3b;
        font-weight: bold;
    }
    
    .selected-column {
        background-color: lightblue;
    }
    
    .search-number-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
    }
    
    .search-number-grid input[type="text"] {
        width: 50px;
        height: 50px;
        font-size: 40px;
        text-align: center;
        border: 2px solid #4CAF50; /* Borda verde */
        margin: 5px; /* Margem entre os campos */
        border-radius: 5px; /* Bordas arredondadas */
        box-shadow: 0 0 5px rgba(0, 128, 0, 0.5); /* Sombra verde suave */
    }
    
    
    /* CSS para tabela de números formatados */
    .number-table {
        width: 60%; /* Ajuste a largura da tabela conforme necessário */
        font-size: 14px; /* Ajuste o tamanho da fonte conforme necessário */
        margin: 40px auto; /* Centraliza a tabela horizontalmente */
    }
    
    .number-table td {
        font-family: monospace;
        white-space: nowrap;
        padding: 8px; /* Ajuste o preenchimento das células conforme necessário */
    }
    
    /* CSS para ocultar e mostrar números do cupom */
    .number-table .hidden-number {
        position: relative;
    }
    
    .number-table .hidden-number::after {
        content: attr(data-hidden);
        color: transparent;
        position: absolute;
        left: 0;
        top: 0;
        width: 50px; /* Ajuste a largura em pixels conforme necessário */
        height: 50px; /* Ajuste a altura em pixels conforme necessário */
        text-align: center;
        line-height: 50px; /* Ajuste a altura da linha conforme o height */
    
    
    }
    
    .number-table .hidden-number:hover::after {
        color: #000;
        background-color: #f0f0f0;
        cursor: pointer;
    }
    /* CSS para destaque do número */
    /* CSS para destaque do número */
    .highlight {
        background-color: #4CAF50; /* Cor de fundo do destaque */
        font-weight: bold;
        color: #000; /* Cor do texto */
        border: 1px solid #333; /* Borda para aumentar a visibilidade */
        border-radius: 5px; /* Bordas arredondadas */
        padding: 4px; /* Espaçamento interno */
        text-align: center;
    }
    .coupon-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: right;
        text-align: right;
        margin-top: 40px;
    }
    
    .coupon-container h2 {
        margin-bottom: 25px;
        font-size: 24px; /* Aumenta o tamanho da fonte do título */
    }
    
    .coupon-container pre {
        background-color: #f9f9f9;
        padding: 30px; /* Espaço ao redor do conteúdo */
        border-radius: 5px;
        margin: 20px;
        overflow: auto; /* Permite rolagem horizontal se necessário */
        white-space: nowrap; /* Evita quebra de linha no texto */
        font-size: 10px; /* Aumenta o tamanho da fonte do texto */
    }
    
    .coupon-container .column {
        margin: 10px; /* Espaço entre as colunas */
    }
    
    /* Estilização adicional para tabelas */
    .coupon-container table {
        width: 100%; /* Ajusta a tabela para usar o máximo de largura disponível */
        border-collapse: collapse; /* Remove espaçamento entre as células */
        margin: 20px 0; /* Margens acima e abaixo da tabela */
    }
    
    .coupon-container th, .coupon-container td {
        border: 1px solid #ddd;
        padding: 15px; /* Aumenta o espaço dentro das células */
        text-align: center;
        font-size: 18px; /* Aumenta o tamanho da fonte nas células */
    }
    
    .coupon-container th {
        background-color: #f4f4f4;
        color: #333;
        font-size: 20px; /* Aumenta o tamanho da fonte no cabeçalho da tabela */
    }
    
    .coupon-container tr:nth-child(even) {
        background-color: #f9f9f9;
    }
    
    .coupon-container tr:hover {
        background-color: #f1f1f1;
    }
    
    /* Estilo base para os botões */
    .prizeSelection .prize-button {
        background-color: #ffffff; /* Cor de fundo personalizada */
        color: rgb(7, 7, 7); /* Cor do texto */
        border: 2px solid #000; /* Borda preta */
        padding: 5px 10px; /* Espaçamento interno */
        cursor: pointer; /* Mostrar cursor de ponteiro */
        border-radius: 0; /* Bordas quadradas */
        transition: background-color 0.3s, border 0.3s; /* Transição suave para a cor de fundo e borda */
        font-size: 18px; /* Tamanho da fonte - ajuste conforme necessário */
    }
    
    /* Cor de fundo ao passar o mouse */
    .prizeSelection .prize-button:hover {
        background-color: #14dd46; /* Cor de fundo ao passar o mouse */
    }
    
    /* Estilo para o botão selecionado */
    .prizeSelection .prize-button.selected {
        background-color: #14dd46; /* Cor de fundo verde quando selecionado */
        color: rgb(0, 0, 0); /* Muda a cor do texto para preto */
        border: 2px solid #000; /* Borda preta */
    }
    
    
    </style>
</head>
<body>
    <div class="container">
        <h1>TENTA A SORTE BRASIL</h1>

        <div class="input-group">
            <label for="searchNumber-grid">DEZENAS SORTEADAS:</label>
            
            <div class="search-number-grid">
                <input type="text" id="part1" maxlength="2" class="number-part">
                <input type="text" id="part2" maxlength="2" class="number-part">
                <input type="text" id="part3" maxlength="2" class="number-part">
                <input type="text" id="part4" maxlength="2" class="number-part">
            </div>
            <input type="hidden" id="searchNumber">
        </div>

        <div class="input-group">
            <label for="prizeSelection">PRÊMIOS:</label>
            <input type="hidden" id="prizeSelection" name="prizeSelection" value="1"> <!-- Campo oculto que armazena o valor do prêmio -->
            <div class="prizeSelection button-group">
                <button onclick="setPrizeSelectionValue('1')" class="prize-button">1º PRÊMIO</button>
                <button onclick="setPrizeSelectionValue('2')" class="prize-button">2º PRÊMIO</button>
                <button onclick="setPrizeSelectionValue('3')" class="prize-button">3º PRÊMIO</button>
                <button onclick="setPrizeSelectionValue('4')" class="prize-button">4º PRÊMIO</button>
                <button onclick="setPrizeSelectionValue('5')" class="prize-button">5º PRÊMIO</button>
                <button onclick="setPrizeSelectionValue('6')" class="prize-button">EXTRA</button>
            </div>
        </div>
        
        
        

        <button onclick="concatenateNumber()">SORTEAR</button>
        <button onclick="getCouponByNumber()">CUPOM</button>


    </div>
    
    <!-- Verifique que o div está corretamente posicionado no HTML -->
    <div id="resultado">
        <!-- A tabela será preenchida dinamicamente com JavaScript -->
    </div>

    <!-- Mova o script para o final do body -->
    <script>
        function setPrizeSelectionValue(value) {
    // Remove a classe 'selected' de todos os botões
    const buttons = document.querySelectorAll('.prizeSelection .prize-button');
    buttons.forEach(button => {
        button.classList.remove('selected');
    });
    
    // Adiciona a classe 'selected' ao botão clicado
    const clickedButton = event.currentTarget; // Captura o botão que foi clicado
    clickedButton.classList.add('selected');

    // Define o valor do campo oculto
    document.getElementById('prizeSelection').value = value;
}



function formatCouponNumber(couponNumber) {
    // Converte o número para uma string e garante que tenha pelo menos 8 dígitos
    const numberStr = couponNumber.toString().padStart(8, '0');
    // Divide a string em grupos de 2 dígitos e junta esses grupos com espaços
    const formattedNumber = numberStr.match(/.{1,2}/g).join(' ');

    return formattedNumber;
}



function concatenateNumber() {
    // Obtém os valores dos quatro campos de entrada
    const part1 = document.getElementById('part1').value;
    const part2 = document.getElementById('part2').value;
    const part3 = document.getElementById('part3').value;
    const part4 = document.getElementById('part4').value;

    // Concatena os valores
    const fullNumber = part1 + part2 + part3 + part4;

    // Armazena o número concatenado no campo oculto searchNumber
    document.getElementById('searchNumber').value = fullNumber;

    // Exibe o número concatenado no console (para fins de verificação)
    console.log('Número concatenado:', fullNumber);

    // Aqui você pode passar o número concatenado para outra função ou usá-lo como necessário
    findCouponByNumber(fullNumber);  // Chama a função para pesquisar o cupom correspondente
}
(function() {
    const intervals = [
    {
        start: ["44505662", "78849096", "00101622", "58647076", "84909612", "38445056", "64707682", "24303642", "98041016", "18243036"],
        end: ["50000000", "80000000", "10000000", "60000000", "90000000", "40000000", "70000000", "30000000", "100000000", "20000000"],
        after: ["40000001", "70000001", "00000001", "50000001", "80000001", "30000001", "60000001", "20000001", "90000001", "10000001"],
        limit: ["44505661", "78849095", "00101621", "58647075", "84909611", "38445055", "64707681", "24303641", "98041015", "18243035"] // 1° Premio
    },
    {
        start: ["15212733", "41475359", "75818793", "21273339", "55616773", "00071319", "35414753", "95010713", "61677379", "81879309"],
        end: ["20000000", "50000000", "80000000", "30000000", "60000000", "10000000", "40000000", "100000000", "70000000", "90000000"],
        after: ["10000001", "40000001", "70000001", "20000001", "50000001", "00000001", "30000001", "90000001", "60000001", "80000001"],
        limit: ["15212732", "41475358", "75818792", "21273338", "55616772", "00071318", "35414752", "95010712", "61677378", "81879308"] // 2° Premio 
    },
    {
        start: ["37434955", "63697581", "97030915", "43495561", "77838995", "23293541", "57636975", "17232935", "83899511", "00091521"],
        end: ["40000000", "70000000", "100000000", "50000000", "80000000", "30000000", "60000000", "20000000", "90000000", "10000000"],
        after: ["30000001", "60000001", "90000001", "40000001", "70000001", "20000001", "50000001", "10000001", "80000001", "00000001"],
        limit: ["37434954", "63697580", "97030914", "43495560", "77838994", "23293540", "57636974", "17232934", "83899510", "00091520"] // 3° Premio 
    },
    {
        start: ["22283440", "56626874", "82889410", "36424854", "62687480", "16222834", "42485460", "00081420", "76828894", "96020814"], 
        end: ["30000000", "60000000", "90000000", "40000000", "70000000", "20000000", "50000000", "10000000", "80000000", "100000000"],
        after: ["20000001", "50000001", "80000001", "30000001", "60000001", "10000001", "40000001", "00000001", "70000001", "90000001"],
        limit: ["22283439", "56626873", "82889309", "36424853", "62687479", "16222833", "42485459", "00081419", "76828893", "96020813"] // 4° Premio
    }, 
    {
        start: ["00061218", "34404652", "60667278", "14202632", "40465258", "94000612", "20263238", "80869208", "54606672", "74808692"],
        end: ["10000000", "40000000", "70000000", "20000000", "50000000", "100000000", "30000000", "90000000", "60000000", "80000000"],
        after: ["00000001", "30000001", "60000001", "10000001", "40000001", "90000001", "20000001", "80000001", "50000001", "70000001"],
        limit: ["00061217", "34404651", "60667277", "14202631", "40465257", "94000611", "20263237", "80869207", "54606671", "74808691"] // 5° Premio
    },
    {
        start: ["59657177", "85919713", "19253137", "65717783", "99051117", "45515763", "79859197", "39455157", "00111723", "25313743"],
        end: ["60000000", "90000000", "20000000", "70000000", "100000000", "50000000", "80000000", "40000000", "10000000", "30000000"],
        after: ["50000001", "80000001", "10000001", "60000001", "90000001", "40000001", "70000001", "30000001", "00000001", "20000001"],
        limit: ["59657176", "85919712", "19253136", "65717782", "99051116", "45515762", "79859196", "39455156", "00111722", "25313742"] // Giro extra

    }
];

// Função para verificar o prêmio e ajustar o giro
function verificarPremio(valor, premio) {
    const premioInfo = intervals[premio - 1]; // Pega os dados do prêmio correspondente
    const valorStr = valor.toString().padStart(8, '0'); // Formata o valor com 8 dígitos
    let indice;

    // Encontrar o intervalo correspondente ao valor atual
    for (let i = 0; i < premioInfo.start.length; i++) {
        const start = premioInfo.start[i];
        const limit = premioInfo.limit[i];

        // Verifica se o valor está dentro do intervalo
        if (valorStr >= start && valorStr <= limit) {
            indice = i;
            break;
        }
    }

    // Se não encontrou um intervalo correspondente
    if (indice === undefined) {
        console.error("Valor fora do intervalo para o prêmio.");
        return;
    }

    // Valida o fim do intervalo e faz a rotação
    if (valorStr === premioInfo.limit[indice]) {
        console.log("Atingiu o limite, girando...");
        // Retorna o valor 'after' para reiniciar o ciclo
        return premioInfo.after[indice];
    }

    // Se ainda está dentro do intervalo, simplesmente incrementa
    return incrementarValor(valorStr);
}

// Função para incrementar o valor dentro de um intervalo
function incrementarValor(valorStr) {
    let valor = parseInt(valorStr, 10);
    valor += 1; // Incrementa o valor em 1
    return valor.toString().padStart(8, '0'); // Retorna o valor incrementado com 8 dígitos
}

// Testes
console.log(verificarPremio('10000000', 1)); // Esperado: '00000001'
console.log(verificarPremio('00061218', 1)); // Esperado: '00061218'
console.log(verificarPremio('00061217', 1)); // Esperado: incremento normal
console.log(verificarPremio('20000000', 2)); // Esperado: '10000001'
console.log(verificarPremio('15212733', 2)); // esperado: '15212733'
console.log(verificarPremio('15212732', 2)); // esperado: incremento normal
console.log(verificarPremio('30000000', 3)); // Esperado: '20000001'
console.log(verificarPremio('20263238', 3)); // esperado: '20263238'
console.log(verificarPremio('20263237', 3)); // esperado: incremento normal
console.log(verificarPremio('40000000', 4)); // Esperado: '30000001'
console.log(verificarPremio('34404652', 4)); // Esperado: '34404652'
console.log(verificarPremio('34404651', 4)); // Esperado: incremento normal
console.log(verificarPremio('50000000', 5)); // Esperado: '40000001'
console.log(verificarPremio('40465258', 5)); // Esperado: '40465258'
console.log(verificarPremio('40465257', 5)); // Esperado: incremento normal
console.log(verificarPremio('60000000', 6)); // Esperado: '50000001'
console.log(verificarPremio('54606672', 6)); // Esperado: '54606672'
console.log(verificarPremio('54606671', 6)); // Esperado: incremento normal
console.log(verificarPremio('20000000', 1)); // Esperado: '10000001'
console.log(verificarPremio('16222834', 1)); // Esperado: '16222834'
console.log(verificarPremio('16222833', 1)); // Esperado: incremento normal
console.log(verificarPremio('30000000', 2)); // Esperado: '20000001'
console.log(verificarPremio('21273339', 2)); // esperado: '21273339'
console.log(verificarPremio('21273338', 2)); // esperado: incremento normal
console.log(verificarPremio('40000000', 3)); // Esperado: '30000001'
console.log(verificarPremio('35414753', 3)); // esperado: '35414753'
console.log(verificarPremio('35414752', 3)); // esperado: incremento normal
console.log(verificarPremio('50000000', 4)); // Esperado: '40000001'
console.log(verificarPremio('41475359', 4)); // Esperado: '41475359'
console.log(verificarPremio('41475358', 4)); // Esperado: incremento normal
console.log(verificarPremio('60000000', 5)); // Esperado: '50000001'
console.log(verificarPremio('55616773', 5)); // Esperado: '55616773'
console.log(verificarPremio('55616772', 5)); // Esperado: incremento normal
console.log(verificarPremio('70000000', 6)); // Esperado: '60000001'
console.log(verificarPremio('61677379', 6)); // Esperado: '61677379'
console.log(verificarPremio('61677378', 6)); // Esperado: incremento normal
console.log(verificarPremio('30000000', 1)); // Esperado: '20000001'
console.log(verificarPremio('22283440', 1)); // Esperado: '22283440'
console.log(verificarPremio('22283439', 1)); // Esperado: incremento normal
console.log(verificarPremio('40000000', 2)); // Esperado: '30000001'
console.log(verificarPremio('36424854', 2)); // esperado: '36424854'
console.log(verificarPremio('36424853', 2)); // esperado: incremento normal
console.log(verificarPremio('50000000', 3)); // Esperado: '40000001'
console.log(verificarPremio('42485460', 3)); // esperado: '42485460'
console.log(verificarPremio('42485459', 3)); // esperado: incremento normal
console.log(verificarPremio('60000000', 4)); // Esperado: '50000001'
console.log(verificarPremio('56626874', 4)); // Esperado: '56626874'
console.log(verificarPremio('56626873', 4)); // Esperado: incremento normal
console.log(verificarPremio('70000000', 5)); // Esperado: '60000001'
console.log(verificarPremio('62687480', 5)); // Esperado: '62687480'
console.log(verificarPremio('62687479', 5)); // Esperado: incremento normal
console.log(verificarPremio('80000000', 6)); // Esperado: '70000001'
console.log(verificarPremio('74808692', 6)); // Esperado: '74808692'
console.log(verificarPremio('74808691', 6)); // Esperado: incremento normal
console.log(verificarPremio('40000000', 1)); // Esperado: '30000001'
console.log(verificarPremio('37434954', 1)); // Esperado: '37434954'
console.log(verificarPremio('37434953', 1)); // Esperado: incremento normal
console.log(verificarPremio('50000000', 2)); // Esperado: '40000001'
console.log(verificarPremio('43495561', 2)); // esperado: '43495460'
console.log(verificarPremio('43495560', 2)); // esperado: incremento normal
console.log(verificarPremio('60000000', 3)); // Esperado: '50000001'
console.log(verificarPremio('57636975', 3)); // esperado: '57636975'
console.log(verificarPremio('57636974', 3)); // esperado: incremento normal
console.log(verificarPremio('70000000', 4)); // Esperado: '60000001'
console.log(verificarPremio('63697581', 4)); // Esperado: '63697581'
console.log(verificarPremio('63697580', 4)); // Esperado: incremento normal
console.log(verificarPremio('80000000', 5)); // Esperado: '70000001'
console.log(verificarPremio('75818793', 5)); // Esperado: '75818793'
console.log(verificarPremio('75818792', 5)); // Esperado: incremento normal
console.log(verificarPremio('90000000', 6)); // Esperado: '80000001'
console.log(verificarPremio('83899511', 6)); // Esperado: '83899511'
console.log(verificarPremio('83899510', 6)); // Esperado: incremento normal
console.log(verificarPremio('50000000', 1)); // Esperado: '40000001'
console.log(verificarPremio('44505662', 1)); // Esperado: '44505662'
console.log(verificarPremio('44505661', 1)); // Esperado: incremento normal
console.log(verificarPremio('60000000', 2)); // Esperado: '50000001'
console.log(verificarPremio('58647076', 2)); // esperado: '58647076'
console.log(verificarPremio('58647075', 2)); // esperado: incremento normal
console.log(verificarPremio('70000000', 3)); // Esperado: '60000001'
console.log(verificarPremio('64707682', 3)); // esperado: '64707682'
console.log(verificarPremio('64707681', 3)); // esperado: incremento normal
console.log(verificarPremio('80000000', 4)); // Esperado: '70000001'
console.log(verificarPremio('76828894', 4)); // Esperado: '76828894'
console.log(verificarPremio('76828893', 4)); // Esperado: incremento normal
console.log(verificarPremio('90000000', 5)); // Esperado: '80000001'
console.log(verificarPremio('84909612', 5)); // Esperado: '84909612'
console.log(verificarPremio('84909612', 5)); // Esperado: incremento normal
console.log(verificarPremio('100000000', 6)); // Esperado:'90000001'
console.log(verificarPremio('96121824', 6)); // Esperado: '96121824'
console.log(verificarPremio('96121823', 6)); // Esperado: incremento normal
console.log(verificarPremio('60000000', 1)); // Esperado: '50000001'
console.log(verificarPremio('59657177', 1)); // Esperado: '59657177'
console.log(verificarPremio('59657176', 1)); // Esperado: incremento normal
console.log(verificarPremio('70000000', 2)); // Esperado: '60000001'
console.log(verificarPremio('65717783', 2)); // esperado: '65717783'
console.log(verificarPremio('65717782', 2)); // esperado: incremento normal
console.log(verificarPremio('80000000', 3)); // Esperado: '70000001'
console.log(verificarPremio('77838995', 3)); // esperado: '77838995'
console.log(verificarPremio('77838994', 3)); // esperado: incremento normal
console.log(verificarPremio('90000000', 4)); // Esperado: '80000001'
console.log(verificarPremio('89950107', 4)); // Esperado: '89950107'
console.log(verificarPremio('89950106', 4)); // Esperado: incremento normal
console.log(verificarPremio('100000000', 5)); // Esperado:'90000001'
console.log(verificarPremio('97131925', 5)); // Esperado: '97131925'
console.log(verificarPremio('97131924', 5)); // Esperado: incremento normal
console.log(verificarPremio('10000000', 6)); // Esperado: '00000001'
console.log(verificarPremio('05111723', 6)); // Esperado: '05111723'
console.log(verificarPremio('05111722', 6)); // Esperado: incremento normal





   

    function generateCoupon(couponNumber) {
        let coupon = [];
        for (let i = 0; i < intervals.length; i++) {
            let col = [];
            for (let j = 0; j < intervals[i].start.length; j++) {
                let num = incrementNumber(
                    intervals[i].start[j],
                    couponNumber - 1,
                    intervals[i].end[j],
                    intervals[i].after[j],
                    intervals[i].limit[j]
                );
                col.push(num);
            }
            coupon.push(col);
        }
        return coupon;
    }   
    
    
    
    
    
// Função para incrementar o número e garantir que esteja dentro dos limites corretos
function incrementNumber(start, increment, end, after, limit) {
    let num = BigInt(start) + BigInt(increment);

    if (num > BigInt(end)) {
        num = BigInt(after) + (num - BigInt(end) - 1n);
    }

    if (num > BigInt(limit)) {
        const range = BigInt(limit) - BigInt(start) + 1n;
        if (range > 0n) {
            num = BigInt(start) + ((num - BigInt(start)) % range);
        }
    }

    return formatCouponNumber(num.toString().slice(-8));
}
   
 

    
    
    
function searchCoupons(searchNumber, selectedColumn) {
    console.log("Função searchCoupons chamada com:", { searchNumber, selectedColumn });

    let searchNumberBigInt = BigInt(searchNumber);

    if (searchNumberBigInt === 0n) {
        searchNumberBigInt = BigInt("100000000");
    }

    let results = [];
    let couponSet = new Set();

    for (let prizeIndex = 0; prizeIndex < intervals.length; prizeIndex++) {
        const interval = intervals[prizeIndex];
        let found = false;
        let couponNumber;

        // Verificar os intervalos padrão
        for (let i = 0; i < interval.start.length; i++) {
            const start = BigInt(interval.start[i]);
            const end = BigInt(interval.end[i]);

            if (searchNumberBigInt >= start && searchNumberBigInt <= end) {
                let offset = searchNumberBigInt - start;
                couponNumber = Number(offset) + 1; // Aqui estamos garantindo que o cupom comece em 1

                if (!couponSet.has(`${prizeIndex}-${couponNumber}`)) {
                    results.push({
                        prizeIndex: prizeIndex,
                        couponNumber: couponNumber,
                        prizeNumber: searchNumber
                    });
                    couponSet.add(`${prizeIndex}-${couponNumber}`);
                }

                found = true;
                break;
            }
        }

        // Verificar os intervalos "after"
        if (!found) {
            for (let i = 0; i < interval.after.length; i++) {
                const after = BigInt(interval.after[i]);
                const end = BigInt(interval.end[i]);
                const limit = BigInt(interval.limit[i]);

                const diff = end - limit - 0n;
                if (diff !== 0n) {
                    if (searchNumberBigInt >= after && searchNumberBigInt <= end) {
                        let offset = searchNumberBigInt - after;
                        couponNumber = Number(offset + diff) + 1; // Aqui também estamos garantindo que o cupom comece em 1

                        if (!couponSet.has(`${prizeIndex}-${couponNumber}`)) {
                            results.push({
                                prizeIndex: prizeIndex,
                                couponNumber: couponNumber,
                                prizeNumber: searchNumber
                            });
                            couponSet.add(`${prizeIndex}-${couponNumber}`);
                        }

                        found = true;
                        break;
                    }
                }
            }
        }

        // Verificar a lógica para o intervalo "default"
        if (!found) {
            const start = BigInt(interval.start[0]);
            const end = BigInt(interval.end[0]);
            const after = BigInt(interval.after[0]);
            const range = end - after + 1n;

            if (range !== 0n) {
                let offset = (searchNumberBigInt - start) % range;
                couponNumber = Number(offset) + 1; // Garantindo que o cupom comece em 1

                if (!couponSet.has(`${prizeIndex}-${couponNumber}`)) {
                    results.push({
                        prizeIndex: prizeIndex,
                        couponNumber: couponNumber,
                        prizeNumber: searchNumber
                    });
                    couponSet.add(`${prizeIndex}-${couponNumber}`);
                }
            }
        }
    }

    const filteredResults = results.filter(result => result.prizeIndex === selectedColumn - 1);
    console.log("Resultados filtrados:", filteredResults);

    if (filteredResults.length === 0) {
        return {
            result: "Nenhum cupom encontrado para a coluna selecionada.",
            results: []
        };
    }

    const couponNumber = filteredResults[0].couponNumber;
    
    // Gera o cupom corretamente mantendo a lógica de vinculação dos números
    const coupon = generateCoupon(couponNumber);
    
    function formatCouponNumber(number) {
        // Certifique-se de que o número não exceda 10.000.000
        let num = Math.min(Number(number), 10000000);
        
        // Se o número for exatamente 10.000.000, retornar a formatação correta
        if (num === 10000000) {
            return "10.000.000"; // Para 8 dígitos
        }
        
        // Para números abaixo de 10.000.000, formate como 7 dígitos
        let str = num.toString().padStart(7, '0');
        
        // Aplica a formatação com ponto
        return str.replace(/(\d{1})(\d{3})(\d{3})/, '$1.$2.$3');
    }
    
    

    const formattedCouponNumber = formatCouponNumber(couponNumber);

    // Armazenar o número do cupom no localStorage
    localStorage.setItem('lastCouponNumber', formattedCouponNumber);

    let result = `<div style="text-align: center; margin: 20px 0;">`;
    result += `<h3>NÚMERO DO CUPOM: ${formattedCouponNumber}</h3>`;
    result += `<h4>${selectedColumn}º PRÊMIO</h4>`;
    result += `</div>`;

    // Gera a tabela usando o cupom atualizado mas com a lógica anterior
    result += printCoupon([coupon[selectedColumn - 1]], selectedColumn);

    return {
        result: result,
        results: filteredResults
    };
}







function printCoupon(coupon, selectedColumn) {
    // Obtém os valores dos campos de entrada
    const part1 = document.getElementById('part1').value.trim();
    const part2 = document.getElementById('part2').value.trim();
    const part3 = document.getElementById('part3').value.trim();
    const part4 = document.getElementById('part4').value.trim();

    // Concatena os valores para formar o número completo
    const highlightNumber = (part1 + part2 + part3 + part4).padStart(8, '0');

    // Inicia o HTML para a tabela
    let output = "<table class='prize-table'><thead><tr>";

    // Define o texto do prêmio baseado no índice selecionado
    let prizeText;
    if (selectedColumn === 6) {
        prizeText = 'EXTRA';
    } else {
        prizeText = selectedColumn + 'º PRÊMIO';
    }
    
    output += `<th>${prizeText}</th>`;

    output += "</tr></thead><tbody>";

 

    // Calcula o número máximo de linhas (assumindo que todas as colunas têm o mesmo número de linhas)
    const maxRows = Math.max(...coupon.map(line => line.length));

    // Adiciona as linhas da tabela
    for (let row = 0; row < maxRows; row++) {
        output += "<tr>";
        for (let col = 0; col < coupon.length; col++) {
            const cell = coupon[col][row] !== undefined ? coupon[col][row].toString().padStart(2, '0') : ""; // Preenche células vazias com espaço

            // Adiciona espaços entre as dezenas
            const formattedCell = cell.match(/.{1,2}/g)?.join(' ') || '';

            // Destaca o número concatenado
            if (formattedCell.replace(/\s+/g, '') === highlightNumber) {
                output += `<td class='highlight'>${formattedCell}</td>`;
            } else {
                output += `<td>${formattedCell}</td>`;
            }
        }
        output += "</tr>";
    }

    output += "</tbody></table>";
    return output;
}






function formatCouponNumber(number) {
    return number.toString().padStart(8, '0');
}
    
    
window.getCouponByNumber = function() {
    // Recuperar o número do cupom armazenado no localStorage
    let storedCouponNumber = localStorage.getItem('lastCouponNumber');

    // Verificar se o número do cupom foi armazenado
    if (!storedCouponNumber) {
        document.getElementById('resultado').innerHTML = "<p>Nenhum cupom foi armazenado.</p>";
        return;
    }

    // Converte o número armazenado para inteiro, removendo os pontos
    let couponNumber = parseInt(storedCouponNumber.replace(/\./g, ''), 10);

    // Verifica se o número do cupom é válido
    if (isNaN(couponNumber) || couponNumber < 0 || couponNumber > 99999999) {
        document.getElementById('resultado').innerHTML = "<p>Número de cupom inválido. Por favor, digite um número entre 0 e 99999999.</p>";
        return;
    }

    function formatCouponNumber(number) {
        // Certifique-se de que o número não exceda 10.000.000
        let num = Math.min(Number(number), 10000000);
        
        // Se o número tiver 8 dígitos, formate como 10.000.000
        if (num >= 10000000) {
            return "10.000.000"; // Para 8 dígitos
        }
        
        // Formata o número para 7 dígitos
        let str = num.toString().padStart(7, '0');
        
        // Aplica a formatação com ponto para números com 7 dígitos
        return str.replace(/(\d{1})(\d{3})(\d{3})/, '$1.$2.$3');
    }
    
    

    // Gerar o cupom com base no número
    let coupon = generateCoupon(couponNumber);

    // Obter a coluna selecionada
    let selectedColumn = parseInt(document.getElementById('prizeSelection').value);

    // Formatar o número do cupom
    const formattedCouponNumber = formatCouponNumber(couponNumber);

    // Exibir o resultado formatado e centralizado
    let output = `<div class="coupon-container"><h2>CUPOM N° ${formattedCouponNumber}</h2>`;
    output += `<pre>${printCoupon([coupon[selectedColumn - 1]], selectedColumn)}</pre></div>`;
    document.getElementById('resultado').innerHTML = output;
}




    window.findCouponByNumber = function(fullNumber) {
        // Verificar se o número é válido
        if (fullNumber.length !== 8 || isNaN(parseInt(fullNumber))) {
            document.getElementById('resultado').innerHTML = "Número inválido. Por favor, digite 8 dígitos.";
            return;
        }
    
        // Obter a coluna selecionada
        let selectedColumn = parseInt(document.getElementById('prizeSelection').value);
    
        // Pesquisar cupons
        let { result, results } = searchCoupons(fullNumber, selectedColumn);
    
        // Verificar se encontrou resultados
        if (results.length > 0) {
            // Atualiza a saída com o resultado formatado
            document.getElementById('resultado').innerHTML = result;
            
            // Destaca o número concatenado
            highlightNumber(fullNumber);
        } else {
            document.getElementById('resultado').innerHTML = "Erro ao processar o número.";
        }
    };
            
})();
    </script>
</body>
</html>
